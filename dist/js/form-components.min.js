angular.module("tw.form-components", []);
!function(a){"use strict";function b(a,b,c,d){function e(a){return!isNaN(parseFloat(a))}var f=this,g=a.controller("ngModel");f.showDecimals=!0,b.$watch("$ctrl.ngModel",function(a,b){a!==b&&g.$setDirty()}),b.$watch("$ctrl.currency",function(a,b){a&&a!==b&&(f.showDecimals=d.getDecimals(a)>0)}),a.find("input").on("blur",function(){g.$setTouched(),a.triggerHandler("blur")}),g.$validators.min=function(a,b){return"undefined"==typeof f.ngMin||null===f.ngMin||!e(b)||b>=f.ngMin},g.$validators.max=function(a,b){return"undefined"==typeof f.ngMax||null===f.ngMax||!e(b)||b<=f.ngMax},f.changedAmount=function(){f.ngChange&&c(f.ngChange),f.onAmountChange&&(console&console.log&&console.log("onAmountChange is deprecated in twAmountCurrencySelect, please use ngChange."),c(f.onAmountChange))},f.changedCurrency=function(){f.onCurrencyChange&&c(f.onCurrencyChange)},f.customAction=function(){f.onCustomAction&&f.onCustomAction()}}a.module("tw.form-components").controller("TwAmountCurrencySelectController",b),b.$inject=["$element","$scope","$timeout","TwCurrencyData"]}(window.angular),function(a){"use strict";function b(a,b,c,d){function e(a){return!isNaN(parseFloat(a))}var f=this,g=a.controller("ngModel");f.showDecimals=!0,b.$watch("$ctrl.ngModel",function(a,b){a!==b&&g.$setDirty()}),b.$watch("$ctrl.currency",function(a,b){a!==b&&(f.showDecimals=d.getDecimals(a)>0)}),a.find("input").on("blur",function(){g.$setTouched(),a.triggerHandler("blur")}),f.currencyCode&&console&&console.log&&console.log("currency code is deprecated in twCurrencyInput, please use currency."),g.$validators.min=function(a,b){return"undefined"==typeof f.ngMin||null===f.ngMin||!e(b)||b>=f.ngMin},g.$validators.max=function(a,b){return"undefined"==typeof f.ngMax||null===f.ngMax||!e(b)||b<=f.ngMax},f.changedInputValue=function(){f.ngChange&&c(f.ngChange)}}a.module("tw.form-components").controller("TwCurrencyInputController",b),b.$inject=["$element","$scope","$timeout","TwCurrencyData"]}(window.angular),function(a){"use strict";function b(a,b,c,d){function e(){if(A.ngModel)h(),B=!0;else{if(A.modelType){if(A.modelType!==D&&A.modelType!==E)throw new Error("Invalid modelType, should be "+D+" or "+E);A.dateModelType=A.modelType}else A.dateModelType=E;A.day=null,A.month=0,A.year=null}z=a.controller("ngModel"),z.$validators.min=function(a){var b=f(A.ngMin,A.min),c=g(a);return!b||!c||c>=b},z.$validators.max=function(a){var b=f(A.ngMax,A.max),c=g(a);return!b||!c||c<=b},j(),k(),l(),i(),q()}function f(a,b){var c=a?a:!!b&&b;return!!c&&(c="string"==typeof c?new Date(c):c,!!o(c)&&c)}function g(a){return"string"==typeof a?new Date(a):a}function h(){if(!n(A.ngModel))throw new Error("date model passed should either be instance of Date or valid ISO8601 string");A.dateModelType="string"==typeof A.ngModel?D:E,A.explodeDateModel(A.ngModel)}function i(){A.dateMonths=r()}function j(){A.dateRequired=void 0!==A.ngRequired?A.ngRequired:void 0!==A.required}function k(){A.dateDisabled=void 0!==A.ngDisabled?A.ngDisabled:void 0!==A.disabled}function l(){A.locale||(A.locale=C),A.monthBeforeDay=d.isMonthBeforeDay(A.locale)}function m(a){var b="string"==typeof a?new Date(a):a;A.day=b.getUTCDate(),A.month=b.getUTCMonth(),A.year=b.getUTCFullYear()}function n(a){return o(a)||p(a)}function o(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())}function p(a){return"string"==typeof a&&o(new Date(a))}function q(){c.$watch("vm.day",function(a,b){a!==b&&B&&z.$setDirty()}),c.$watch("vm.month",function(a,b){a!==b&&(A.adjustLastDay(),z.$setTouched(),B&&z.$setDirty())}),c.$watch("vm.year",function(a,b){a!==b&&B&&z.$setDirty()}),c.$watch("vm.ngModel",function(a,b){a!==b&&n(A.ngModel)&&(z.$setDirty(),A.explodeDateModel(A.ngModel))}),c.$watch("vm.ngRequired",function(a,b){a!==b&&j()}),c.$watch("vm.ngDisabled",function(a,b){a!==b&&k()}),c.$watch("vm.locale",function(a,b){a!==b&&(l(),i())})}function r(){var a=d.getMonthNamesForLocale(A.locale);return s(a)}function s(a){return a.map(function(a,b){return{value:b,label:a}})}function t(){return u(A.year)&&u(A.day)&&(u(A.month)||v(A.month))}function u(a){return"number"==typeof a}function v(a){return"string"==typeof a&&!isNaN(Number(A.month))}function w(){var a=d.getUTCDate(Number(A.year),Number(A.month),Number(A.day));return a}function x(){if(A.adjustLastDay(),!t())return void z.$setViewValue(null);var a=w();if(A.dateModelType===D){var b=a.toISOString(),c=b.substring(0,b.indexOf("T"));z.$setViewValue(c)}else z.$setViewValue(a)}function y(){var a=Number(A.day),b=Number(A.month),c=Number(A.year),e=d.getLastDayOfMonth(c,b);a>e&&(A.day=parseInt(e,10))}var z,A=this,B=!1;A.updateDateModelAndValidationClasses=x,A.explodeDateModel=m,A.combineDate=w,A.adjustLastDay=y,A.validDate=n;var C="en",D="string",E="object";e()}a.module("tw.form-components").controller("TwDateController",b),b.$inject=["$element","$log","$scope","TwDateService"]}(window.angular),function(a){"use strict";function b(){return{require:"ngModel",bindToController:!0,controller:"TwAmountCurrencySelectController",controllerAs:"$ctrl",replace:!1,restrict:"E",transclude:{addon:"?addon"},template:c,scope:{ngModel:"=",ngMin:"=",ngMax:"=",ngRequired:"=",ngDisabled:"=",ngChange:"&",amountReadOnly:"=",onAmountChange:"&",currency:"=",currencies:"=",onCurrencyChange:"&",currencyFilterPlaceholder:"@",customActionLabel:"=",onCustomAction:"&",placeholder:"@",size:"@",locale:"@"}}}a.module("tw.form-components").directive("twAmountCurrencySelect",b);var c='\t\t<div class="input-group" ng-class="{ \t\t\t\'input-group-sm\': $ctrl.size === \'sm\', \t\t\t\'input-group-lg\': $ctrl.size === \'lg\', \t\t\tdisabled: $ctrl.ngDisabled \t\t}">  \t\t\t<input \t\t\t\ttype="tel"  \t\t\t\tautocomplete="off"  \t\t\t\tname="amount"  \t\t\t\tstep="any"  \t\t\t\tclass="form-control"  \t\t\t\tplaceholder="{{ $ctrl.placeholder }}" \t\t\t\ttw-focusable  \t\t\t\tshow-decimals="$ctrl.showDecimals" \t\t\t\ttw-number-input-formatter  \t\t\t\tng-change="$ctrl.changedAmount()"  \t\t\t\tng-model="$ctrl.ngModel" \t\t\t\tng-disabled="$ctrl.ngDisabled" /> \t\t\t<span class="input-group-addon" \t\t\t\tng-class="{\'input-lg\': $ctrl.size === \'lg\'}" ng-transclude="addon"></span> \t\t\t<span class="input-group-btn">  \t\t\t\t<tw-select \t\t\t\t\tng-model="$ctrl.currency" \t\t\t\t\tng-required="true" \t\t\t\t\tsize="{{ $ctrl.size }}" \t\t\t\t\tinverse="true" \t\t\t\t\tdropdown-right="xs" \t\t\t\t\tdropdown-width="lg" \t\t\t\t\thide-currency="xs" \t\t\t\t\thide-note="true" \t\t\t\t\thide-secondary="true" \t\t\t\t\toptions="$ctrl.currencies" \t\t\t\t\tfilter="{{ $ctrl.currencyFilterPlaceholder }}" \t\t\t\t\tng-change="$ctrl.changedCurrency()"> \t\t\t\t\t\t<a href="" ng-if="!!$ctrl.customActionLabel" ng-click="$ctrl.onCustomAction()"> \t\t\t\t\t\t\t{{ $ctrl.customActionLabel }} \t\t\t\t\t\t</a> \t\t\t\t</tw-select> \t\t\t</span> \t\t</div>'}(window.angular),function(a){function b(){function a(a,c){var d=this,e=c.controller("ngModel");c.find(".tw-checkbox-button");labelSelector=".checkbox",d.isChecked=function(){return d.ngTrueValue&&d.ngTrueValue===d.ngModel||!d.ngTrueValue&&d.ngModel||!1},d.checked=d.isChecked(),d.buttonClick=function(a){d.checked?(d.checked=!1,e.$setViewValue(d.ngFalseValue||!1)):(d.checked=!0,e.$setViewValue(d.ngTrueValue||!0)),e.$setTouched(),a&&a.stopPropagation(),b(d.checked,c,e,d)},d.buttonFocus=function(){c.closest(".checkbox").find("label").addClass("focus"),c.triggerHandler("focus")},d.buttonBlur=function(){c.closest(".checkbox").find("label").removeClass("focus"),c.triggerHandler("blur"),e.$setTouched(),b(d.checked,c,e,d)},d.hiddenClick=function(a){a.stopPropagation()},c.closest("label").on("click",function(a){c.find("button").trigger("click"),a.preventDefault(),a.stopPropagation()}),a.$watch("$ctrl.ngModel",function(a,f){a!==f&&(e.$setDirty(),b(d.checked,c,e,d),d.checked=d.isChecked())}),a.$watch("$ctrl.ngDisabled",function(a,b){a&&!b?c.closest(".checkbox").addClass("disabled").addClass("disabled",!0):!a&&b&&c.closest(".checkbox").removeClass("disabled").removeClass("disabled")}),a.$watch("$ctrl.ngRequired",function(a,f){a!==f&&a&&b(d.checked,c,e,d)})}function b(a,b,c,d){c.$touched&&(!a&&d.ngRequired?(c.$setValidity("required",!1),b.find(".tw-checkbox-button").addClass("has-error"),b.closest(".checkbox").addClass("has-error"),b.closest(".form-group").addClass("has-error")):(c.$setValidity("required",!0),b.find(".tw-checkbox-button").removeClass("has-error"),b.closest(".checkbox").removeClass("has-error"),b.closest(".form-group").removeClass("has-error")))}return{restrict:"EA",require:"ngModel",controller:["$scope","$element",a],controllerAs:"$ctrl",bindToController:!0,scope:{name:"@",ngModel:"=",ngTrueValue:"=",ngFalseValue:"=",ngRequired:"=",ngDisabled:"="},template:" \t\t\t\t<input type='hidden' class='sr-only' \t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\tng-click='$ctrl.hiddenClick($event)' \t\t\t\t\tng-disabled='$ctrl.ngDisabled'/> \t\t\t\t<button type='button' class='tw-checkbox-button' tw-focusable \t\t\t\t\tng-click='$ctrl.buttonClick($event)' \t\t\t\t\tng-focus='$ctrl.buttonFocus()' \t\t\t\t\tng-blur='$ctrl.buttonBlur()' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\tng-class='{\"checked\": $ctrl.checked}' \t\t\t\t\taria-pressed='{{$ctrl.checked}}'> \t\t\t\t\t<span class='tw-checkbox-check glyphicon glyphicon-ok'></span> \t\t\t\t</button>"}}a.module("tw.form-components").directive("twCheckbox",b)}(window.angular),function(a){"use strict";function b(){return{require:"ngModel",bindToController:!0,controller:"TwCurrencyInputController",controllerAs:"$ctrl",replace:!1,restrict:"E",transclude:{addon:"?addon"},template:c,scope:{ngModel:"=",ngChange:"&",ngMin:"=",ngMax:"=",ngRequired:"=",ngDisabled:"=",currency:"=",currencyCode:"@",placeholder:"@",size:"@",locale:"@"}}}a.module("tw.form-components").directive("twCurrencyInput",b);var c=' \t\t<div class="input-group" ng-class="{ \t\t\t\'input-group-sm\': $ctrl.size === \'sm\', \t\t\t\'input-group-lg\': $ctrl.size === \'lg\', \t\t\tdisabled: $ctrl.ngDisabled \t\t}"> \t\t\t<input \t\t\t\ttype="tel" \t\t\t\tautocomplete="off" \t\t\t\tname="amount" \t\t\t\tstep="any" \t\t\t\tclass="form-control p-r-0" \t\t\t\tplaceholder="{{$ctrl.placeholder}}" \t\t\t\tshow-decimals="$ctrl.showDecimals" \t\t\t\ttw-focusable \t\t\t\ttw-number-input-formatter \t\t\t\tng-change="$ctrl.changedInputValue()" \t\t\t\tng-model="$ctrl.ngModel" \t\t\t\tng-disabled="$ctrl.ngDisabled" /> \t\t\t<span class="hello-world input-group-addon tw-currency-input-code p-l-1"> \t\t\t\t<span ng-transclude="addon"></span> \t\t\t\t{{ $ctrl.currency || $ctrl.currencyCode }} \t\t\t</span> \t\t</div> \t'}(window.angular),function(a){"use strict";function b(){return{require:"ngModel",bindToController:!0,controller:["$element","$scope","$timeout","TwDateService",c],controllerAs:"$ctrl",replace:!1,restrict:"E",template:d,scope:{ngModel:"=",ngChange:"&",ngMin:"=",ngMax:"=",ngRequired:"=",ngDisabled:"=",placeholder:"@",size:"@",locale:"@"}}}function c(a,b,c,d){function e(){C.yearOffset=0,v=a.controller("ngModel"),g(),h(),a.find(".btn, .dropdown-menu").on("focusout",function(){c(function(){0!==a.find(".btn:focus").length||a.find(".btn-group").hasClass("open")||a.trigger("blur")},150)}),C.ngModel&&C.ngModel.getUTCDate?C.resetView(C.ngModel):C.resetView(),j(C.locale),m(C.ngModel,!0),n(C.ngMin),o(C.ngMax),v.$validate(),C.weeks=i()}function f(){a.find("button").focus()}function g(){v.$validators.min=function(a,b){var c=a||b;return!(c&&c<C.ngMin)||(l(),!1)},v.$validators.max=function(a,b){var c=a||b;return!(c&&c>C.ngMax)||(l(),!1)}}function h(){b.$watch("$ctrl.locale",function(a,b){a&&a!==b&&j(a)}),b.$watch("$ctrl.ngModel",function(a,b){a&&a!==b&&m(a,!0)}),b.$watch("$ctrl.ngRequired",function(a,b){v.$validate()}),b.$watch("$ctrl.ngMin",function(a,b){a!==b&&(n(C.ngMin),C.ngModel<C.ngMin&&l())}),b.$watch("$ctrl.ngMax",function(a,b){a!==b&&(o(C.ngMax),C.ngModel>C.ngMax&&l())})}function i(){var a=d.getWeekday(C.year,C.month,1);0===a&&(a=7);for(var b=d.getLastDayOfMonth(C.year,C.month),c=[],e=[],f=1;f<a;f++)c.push(!1);for(f=1;f<=b;f++)c.push(f),(a+f-1)%7===0&&(e.push(c),c=[]);if(c.length){for(f=c.length;f<7;f++)c.push(!1);e.push(c)}return e}function j(a){a||(C.locale="en-GB"),C.monthBeforeDay=d.isMonthBeforeDay(C.locale),C.monthsOfYear=d.getMonthNamesForLocale(C.locale,"long"),C.shortMonthsOfYear=d.getMonthNamesForLocale(C.locale,"short"),C.daysOfWeek=d.getDayNamesForLocale(C.locale,"short"),C.shortDaysOfWeek=d.getDayNamesForLocale(C.locale,"narrow")}function k(a,b,c){return b&&b>a?b:c&&c<a?c:a}function l(){v.$setViewValue(null),C.resetView(),v.$setDirty(),v.$setTouched()}function m(a,b){a&&(a=k(a,C.ngMin,C.ngMax)),b?v.$validate():(v.$setViewValue(a),v.$setDirty(),v.$setTouched()),a&&a.getUTCDate?C.resetView(a):C.resetView()}function n(a){a&&a.getUTCDate?(w=a.getUTCDate(),x=a.getUTCMonth(),y=a.getUTCFullYear()):(w=null,x=null,y=null)}function o(a){a&&a.getUTCDate?(z=a.getUTCDate(),A=a.getUTCMonth(),B=a.getUTCFullYear()):(z=null,A=null,B=null)}function p(){c(function(){a.find("a.active").focus()})}function q(a){u(a,C.ngModel,-7,-4,-4)}function r(a){u(a,C.ngModel,7,4,4)}function s(a){u(a,C.ngModel,-1,-1,-1)}function t(a){u(a,C.ngModel,1,1,1)}function u(a,b,c,e,f){var g=b;"day"===a&&(g=d.addDays(b,c)),"month"===a&&(g=d.addMonths(b,e)),"year"===a&&(g=d.addYears(b,f)),m(g)}var v,w,x,y,z,A,B,C=this;C.openLookup=function(){v.$setTouched(),C.mode="day",C.ngModel&&C.ngModel.getUTCDate?C.resetView(C.ngModel):C.resetView(),c(function(){a.find(".tw-date-lookup-month-label").focus()})},C.selectDay=function(a,b,c,e){return C.isDayDisabled(b,c,e)?void a.stopPropagation():(C.day=b,m(d.getUTCDate(e,c,b)),void f())},C.selectMonth=function(a,b,c){a.stopPropagation(),C.isMonthDisabled(b,c)||(C.month=b,C.weeks=i(),C.mode="day")},C.selectYear=function(a,b){a.stopPropagation(),C.isYearDisabled(b)||(C.year=b,C.mode="month")},C.monthBefore=function(a){a.stopPropagation(),0===C.month?(C.year--,C.month=11):C.month--,C.weeks=i()},C.yearBefore=function(a){a.stopPropagation(),C.year--,C.weeks=i()},C.monthAfter=function(a){a.stopPropagation(),11===C.month?(C.year++,C.month=0):C.month++,C.weeks=i()},C.yearAfter=function(a){a.stopPropagation(),C.year++,C.weeks=i()},C.resetView=function(a){a||(a=new Date),a=k(a,C.ngMin,C.ngMax),C.day=a.getUTCDate(),C.month=a.getUTCMonth(),C.year=a.getUTCFullYear(),C.selectedDate=C.day,C.selectedMonth=C.month,C.selectedYear=C.year,C.weeks=i()},C.isCurrentlySelected=function(a,b,c){return a===C.selectedDate&&b===C.selectedMonth&&c===C.selectedYear},C.isDayDisabled=function(a,b,c){return C.isYearDisabled(c)||C.isMonthDisabled(b,c)||c===y&&b===x&&a<w||c===B&&b===A&&a>z},C.isMonthDisabled=function(a,b){return C.isYearDisabled(b)||b===y&&a<x||b===B&&a>A},C.isYearDisabled=function(a){return y&&a<y||B&&a>B},C.switchToMonths=function(a){f(a.target),p(),a.stopPropagation(),C.mode="month"},C.switchToYears=function(a){f(a.target),p(),a.stopPropagation(),C.mode="year"},C.setYearOffset=function(a,b){a.stopPropagation(),C.yearOffset+=b},C.buttonFocus=function(){a.triggerHandler("focus")},C.blur=function(){a.triggerHandler("focus")},C.keyHandler=function(a){if(!C.ngModel)return void m(d.getUTCDate(C.year,C.month,C.day));var b=a.which||a.charCode||a.keyCode;return 37===b?s(C.mode):38===b?(a.preventDefault(),q(C.mode)):39===b?t(C.mode):40===b&&(a.preventDefault(),r(C.mode)),p(),!0},e()}a.module("tw.form-components").directive("twDateLookup",b);var d=' \t\t<div class="btn-group btn-block dropdown" \t\t\tng-keydown="$ctrl.keyHandler($event)"> \t\t\t<button class="btn btn-input dropdown-toggle tw-date-lookup-button" data-toggle="dropdown" \t\t\t\tng-disabled="$ctrl.ngDisabled" \t\t\t\tng-click="$ctrl.openLookup()" \t\t\t\tng-focus="$ctrl.buttonFocus()" \t\t\t\tng-class="{ \t\t\t\t\t\'btn-sm\': $ctrl.size === \'sm\', \t\t\t\t\t\'btn-lg\': $ctrl.size === \'lg\' \t\t\t\t}"> \t\t\t\t<span ng-if="!$ctrl.ngModel" class="form-control-placeholder tw-date-lookup-placeholder"> \t\t\t\t\t{{$ctrl.placeholder}} \t\t\t\t</span> \t\t\t\t<span ng-if="$ctrl.ngModel" class="tw-date-lookup-selected"> \t\t\t\t\t<span ng-if="$ctrl.monthBeforeDay">{{$ctrl.monthsOfYear[$ctrl.selectedMonth]}}</span> \t\t\t\t\t{{$ctrl.selectedDate}}<span ng-if="$ctrl.monthBeforeDay">,</span> \t\t\t\t\t<span ng-if="!$ctrl.monthBeforeDay">{{$ctrl.monthsOfYear[$ctrl.selectedMonth]}}</span> \t\t\t\t\t{{$ctrl.selectedYear}} \t\t\t\t</span> \t\t\t\t<span class="caret"></span> \t\t\t</button> \t\t\t<div class="dropdown-menu"> \t\t\t\t\t\t\t\t<div ng-if="$ctrl.mode === \'year\'" class="tw-date-lookup-years"> \t\t\t\t\t<div class="text-xs-center p-t-1 p-b-2"> \t\t\t\t\t\t<div class="pull-xs-left p-b-2"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.setYearOffset($event, -20)" \t\t\t\t\t\t\t\tclass="text-no-decoration tw-date-lookup-previous-years"> \t\t\t\t\t\t\t\t<i class="icon icon-left icon-lg"></i> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pull-xs-right p-b-2"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.setYearOffset($event, 20)" \t\t\t\t\t\t\t\tclass="text-no-decoration tw-date-lookup-next-years"> \t\t\t\t\t\t\t\t<i class="icon icon-right icon-lg"></i> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<table class="table table-condensed table-bordered table-calendar m-b-0"> \t\t\t\t\t\t<tbody> \t\t\t\t\t\t\t<tr ng-repeat="row in [0,4,8,12,16]"> \t\t\t\t\t\t\t\t<td ng-repeat="col in [0,1,2,3]"> \t\t\t\t\t\t\t\t\t<a href="" \t\t\t\t\t\t\t\t\t\tng-click="$ctrl.selectYear($event, $ctrl.year - ($ctrl.year % 20) + row + col + $ctrl.yearOffset)" \t\t\t\t\t\t\t\t\t\tng-disabled="$ctrl.isYearDisabled($ctrl.year - ($ctrl.year % 20) + row + col + $ctrl.yearOffset)" \t\t\t\t\t\t\t\t\t\tng-class="{\'active\': $ctrl.selectedYear === ($ctrl.year - ($ctrl.year % 20) + row + col + $ctrl.yearOffset)}" \t\t\t\t\t\t\t\t\t\tclass="tw-date-lookup-year-option"> \t\t\t\t\t\t\t\t\t\t{{$ctrl.year - ($ctrl.year % 20) + row + col + $ctrl.yearOffset}} \t\t\t\t\t\t\t\t\t</a> \t\t\t\t\t\t\t\t</td> \t\t\t\t\t\t\t</tr> \t\t\t\t\t\t</tbody> \t\t\t\t\t</table> \t\t\t\t</div> \t\t\t\t\t\t\t\t<div ng-if="$ctrl.mode === \'month\'" class="tw-date-lookup-months"> \t\t\t\t\t<div class="text-xs-center p-t-1 p-b-2"> \t\t\t\t\t\t<div class="pull-xs-left"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.yearBefore($event)" class="text-no-decoration"> \t\t\t\t\t\t\t\t<i class="icon icon-left icon-lg"></i> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</div> \t\t\t\t\t\t<a href="" ng-click="$ctrl.switchToYears($event)" \t\t\t\t\t\t\tclass="tw-date-lookup-year-label"> \t\t\t\t\t\t\t{{$ctrl.year}} \t\t\t\t\t\t</a> \t\t\t\t\t\t<div class="pull-xs-right"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.yearAfter($event)" class="text-no-decoration"> \t\t\t\t\t\t\t\t<i class="icon icon-right icon-lg"></i> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<table class="table table-condensed table-bordered table-calendar m-b-0"> \t\t\t\t\t\t<tbody> \t\t\t\t\t\t\t<tr ng-repeat="row in [0,4,8]"> \t\t\t\t\t\t\t\t<td ng-repeat="col in [0,1,2,3]"> \t\t\t\t\t\t\t\t\t<a href="" \t\t\t\t\t\t\t\t\t\tng-click="$ctrl.selectMonth($event, row+col, $ctrl.year)" \t\t\t\t\t\t\t\t\t\tng-disabled="$ctrl.isMonthDisabled(row + col, $ctrl.year)" \t\t\t\t\t\t\t\t\t\tng-class="{\'active\': $ctrl.selectedMonth === (row + col) && $ctrl.selectedYear === $ctrl.year}" \t\t\t\t\t\t\t\t\t\tclass="tw-date-lookup-month-option"> \t\t\t\t\t\t\t\t\t\t{{$ctrl.shortMonthsOfYear[row+col] | limitTo:5}} \t\t\t\t\t\t\t\t\t</a> \t\t\t\t\t\t\t\t</td> \t\t\t\t\t\t\t</tr> \t\t\t\t\t\t</tbody> \t\t\t\t\t</table> \t\t\t\t</div> \t\t\t\t\t\t\t\t<div ng-if="$ctrl.mode === \'day\'" class="tw-date-lookup-days"> \t\t\t\t\t<div class="text-xs-center p-t-1 p-b-2"> \t\t\t\t\t\t<div class="pull-xs-left"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.monthBefore($event)" \t\t\t\t\t\t\t\tclass="text-no-decoration tw-date-lookup-previous-month"> \t\t\t\t\t\t\t\t<i class="icon icon-left icon-lg"></i> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</div> \t\t\t\t\t\t<a href="" ng-click="$ctrl.switchToYears($event)" \t\t\t\t\t\t\tclass="tw-date-lookup-month-label"> \t\t\t\t\t\t\t{{$ctrl.monthsOfYear[$ctrl.month]}} {{$ctrl.year}} \t\t\t\t\t\t</a> \t\t\t\t\t\t<div class="pull-xs-right"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.monthAfter($event)" \t\t\t\t\t\t\t\tclass="text-no-decoration tw-date-lookup-next-month"> \t\t\t\t\t\t\t\t<i class="icon icon-right icon-lg"></i> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<table class="table table-condensed table-bordered table-calendar m-b-0"> \t\t\t\t\t\t<thead> \t\t\t\t\t\t\t<tr> \t\t\t\t\t\t\t\t<th ng-repeat="day in $ctrl.daysOfWeek track by $index"> \t\t\t\t\t\t\t\t\t<span class="hidden-xs">{{day | limitTo : 3}}</span> \t\t\t\t\t\t\t\t\t<span class="visible-xs-inline-block">{{$ctrl.shortDaysOfWeek[$index] | limitTo : 2}}</span> \t\t\t\t\t\t\t\t</th> \t\t\t\t\t\t\t</tr> \t\t\t\t\t\t</thead> \t\t\t\t\t\t<tbody> \t\t\t\t\t\t\t<tr ng-repeat="week in $ctrl.weeks"> \t\t\t\t\t\t\t\t<td ng-repeat="day in week track by $index" \t\t\t\t\t\t\t\t\tng-class="{ \t\t\t\t\t\t\t\t\t\t\'default\': $index > 4 \t\t\t\t\t\t\t\t\t}"> \t\t\t\t\t\t\t\t\t<a href="" title="{{day}} {{$ctrl.monthsOfYear[$ctrl.month]}} {{$ctrl.year}}" \t\t\t\t\t\t\t\t\t\tng-if="day" \t\t\t\t\t\t\t\t\t\tng-click="$ctrl.selectDay($event, day, $ctrl.month, $ctrl.year)" \t\t\t\t\t\t\t\t\t\tng-disabled="$ctrl.isDayDisabled(day, $ctrl.month, $ctrl.year)" \t\t\t\t\t\t\t\t\t\tng-class="{ \t\t\t\t\t\t\t\t\t\t\t\'active\': $ctrl.isCurrentlySelected(day, $ctrl.month, $ctrl.year) \t\t\t\t\t\t\t\t\t\t}" \t\t\t\t\t\t\t\t\t\tclass="tw-date-lookup-day-option" tabindex="0"> \t\t\t\t\t\t\t\t\t\t{{day}} \t\t\t\t\t\t\t\t\t</a> \t\t\t\t\t\t\t\t</td> \t\t\t\t\t\t\t</tr> \t\t\t\t\t\t</tbody> \t\t\t\t\t</table> \t\t\t\t</div> \t\t\t</div> \t\t</div>'}(window.angular),function(a){"use strict";function b(){var a={require:"ngModel",bindToController:!0,controller:"TwDateController",controllerAs:"vm",replace:!1,restrict:"E",scope:{ngModel:"=",required:"@",ngRequired:"=",disabled:"@",ngDisabled:"=",locale:"@",twLocale:"=",min:"@",ngMin:"=",max:"@",ngMax:"=",modelType:"@"},template:g,link:c};return a}function c(a,b,c,d){var e,f;b.find("input[name=day]").on("blur",function(){e=!0,e&&f&&(d.$setTouched(),b.triggerHandler("blur"))}),b.find("input[name=year]").on("blur",function(){f=!0,d.$setTouched(),b.triggerHandler("blur")})}a.module("tw.form-components").directive("twDate",b);var d=" \t\t<label class='sr-only'>Day</label> \t\t<input type='number' \t\t\tname='day' \t\t\tclass='form-control tw-date-day' \t\t\tng-model='vm.day' \t\t\tng-change='vm.updateDateModelAndValidationClasses()' \t\t\tplaceholder='DD' \t\t\tmin='1' \t\t\tng-min='1' \t\t\tng-disabled='vm.dateDisabled' \t\t\tng-required='vm.dateRequired' \t\t\ttw-focusable />",e="  \t\t<label class='sr-only'>Month</label>\t\t<tw-select \t\t\tname='month' \t\t\tclass='tw-date-month' \t\t\tng-model='vm.month' \t\t\tng-change='vm.updateDateModelAndValidationClasses()' \t\t\tng-required='vm.dateRequired' \t\t\tng-disabled='vm.dateDisabled' \t\t\toptions='vm.dateMonths'> \t\t</tw-select>",f=" \t\t<label class='sr-only'>Year</label> \t\t<input type='number' \t\t\tname='year' \t\t\tclass='form-control tw-date-year' \t\t\tplaceholder='YYYY' \t\t\tng-model='vm.year' \t\t\tng-change='vm.updateDateModelAndValidationClasses()' \t\t\tng-min='vm.min.getFullYear()' \t\t\tng-max='vm.max.getFullYear()' \t\t\tmaxlength='4' \t\t\tng-maxlength='4' \t\t\tng-disabled='vm.dateDisabled' \t\t\tng-required='vm.dateRequired' \t\t\ttw-focusable />",g=" \t\t<div class='row'> \t\t\t<div class='col-sm-5 tw-date-month-column' ng-if='vm.monthBeforeDay'>"+e+" \t\t\t</div> \t\t\t<div class='col-sm-3 tw-date-day-column'>"+d+" \t\t\t</div> \t\t\t<div class='col-sm-5 tw-date-month-column' ng-if='!vm.monthBeforeDay'>"+e+" \t\t\t</div> \t\t\t<div class='col-sm-4 tw-date-year-column'>"+f+" \t\t\t</div> \t\t</div>"}(window.angular),function(a){"use strict";function b(){return{restrict:"E",require:"ngModel",transclude:!0,controllerAs:"$ctrl",bindToController:!0,controller:"TwDynamicFormControlController",link:d,scope:{type:"@",name:"@",id:"@",placeholder:"@",helpText:"@",step:"@",locale:"@",uploadAccept:"@",uploadIcon:"@",uploadTooLargeMessage:"@",options:"=",ngModel:"=",ngRequired:"=",ngDisabled:"=",ngMinlength:"=",ngMaxlength:"=",ngMin:"=",ngMax:"=",ngPattern:"=",uploadOptions:"="},template:"<div ng-switch='$ctrl.type'> \t\t\t\t<input ng-switch-when='text'  \t\t\t\t\tname='{{$ctrl.name}}'  \t\t\t\t\ttype='text' \t\t\t\t\tclass='form-control' \t\t\t\t\tplaceholder='{{$ctrl.placeholder}}' \t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\tng-model-options='{ allowInvalid: true }' \t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\tng-pattern='$ctrl.ngPattern' \t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\tng-blur='$ctrl.blur()' \t\t\t\t\tng-minlength='$ctrl.ngMinlength' \t\t\t\t\tng-maxlength='$ctrl.ngMaxlength' />  \t\t\t\t<input ng-switch-when='password'  \t\t\t\t\tname='{{$ctrl.name}}'  \t\t\t\t\ttype='password' \t\t\t\t\tclass='form-control' \t\t\t\t\tplaceholder='{{$ctrl.placeholder}}' \t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\tng-model-options='{ allowInvalid: true }' \t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\tng-blur='$ctrl.blur()' \t\t\t\t\tng-minlength='$ctrl.ngMinlength' \t\t\t\t\tng-maxlength='$ctrl.ngMaxlength' />  \t\t\t\t<input ng-switch-when='number'  \t\t\t\t\tname='{{$ctrl.name}}'  \t\t\t\t\ttype='number' \t\t\t\t\tstep='{{$ctrl.step}}' \t\t\t\t\tclass='form-control' \t\t\t\t\tplaceholder='{{$ctrl.placeholder}}' \t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\tng-model-options='{ allowInvalid: true }' \t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\tng-blur='$ctrl.blur()' \t\t\t\t\tng-min='$ctrl.ngMin' \t\t\t\t\tng-max='$ctrl.ngMax' />  \t\t\t\t<div ng-switch-when='radio' \t\t\t\t\tclass='radio' \t\t\t\t\tng-class='{disabled: $ctrl.ngDisabled}' \t\t\t\t\tng-repeat='option in $ctrl.options'> \t\t\t\t\t<label> \t\t\t\t\t\t<tw-radio \t\t\t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\t\t\tng-value='option.value' \t\t\t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\t\t\tng-click='$ctrl.change()' \t\t\t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\t\t\tng-blur='$ctrl.blur()' /> \t\t\t\t\t\t{{option.label}} \t\t\t\t\t</label> \t\t\t\t</div> \t\t\t\t<div ng-switch-when='checkbox' \t\t\t\t\tclass='checkbox' \t\t\t\t\tng-class='{disabled: $ctrl.ngDisabled}'> \t\t\t\t\t<label> \t\t\t\t\t\t<tw-checkbox \t\t\t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\t\t\tng-click='$ctrl.change()' \t\t\t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\t\t\tng-blur='$ctrl.blur()' /> \t\t\t\t\t\t{{$ctrl.placeholder}} \t\t\t\t\t</label> \t\t\t\t</div> \t\t\t\t<div ng-switch-when='select'> \t\t\t\t\t<tw-select \t\t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\t\toptions='$ctrl.options' \t\t\t\t\t\tplaceholder='{{$ctrl.placeholder}}' \t\t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\t\tng-blur='$ctrl.blur()' /> \t\t\t\t</div> \t\t\t\t<div ng-switch-when='upload'> \t\t\t\t\t<tw-upload \t\t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\t\tdescription='{{$ctrl.placeholder}}' \t\t\t\t\t\ticon='{{$ctrl.uploadIcon}}' \t\t\t\t\t\tinstructions='{{$ctrl.helpText}}' \t\t\t\t\t\tcomplete-text='{{$ctrl.placeholder}}' \t\t\t\t\t\ttoo-large-message='{{$ctrl.uploadTooLargeMessage}}' \t\t\t\t\t\taccept='{{$ctrl.uploadAccept}}' \t\t\t\t\t\tbutton-text='{{$ctrl.uploadOptions.buttonText}}' \t\t\t\t\t\tcancel-text='{{$ctrl.uploadOptions.cancelText}}' \t\t\t\t\t\tmax-size='$ctrl.ngMax' \t\t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\t\tng-blur='$ctrl.blur()' /> \t\t\t\t</div> \t\t\t\t<div ng-switch-when='date'> \t\t\t\t\t<tw-date \t\t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\t\tlocale='{{$ctrl.locale}}' \t\t\t\t\t\tng-min='$ctrl.ngMin' \t\t\t\t\t\tng-max='$ctrl.ngMax' \t\t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\t\tng-required='$ctrl.ngRequired' \t\t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\t\tng-change='$ctrl.change()' \t\t\t\t\t\tng-focus='$ctrl.focus()' \t\t\t\t\t\tng-blur='$ctrl.blur()' /> \t\t\t\t</div> \t\t\t\t<ng-transclude class='error-messages'></ng-transclude> \t\t\t</div>"}}function c(a,b){var c=this,d=a.controller("ngModel");c.change=function(){d.$setDirty(),c.ngChange&&c.ngChange()},c.focus=function(){a.triggerHandler("focus")},c.blur=function(){d.$setTouched(),a.triggerHandler("blur")}}function d(a,b,c,d){d.$validators.min=function(b,c){return"undefined"==typeof a.$ctrl.ngMin||!("number"==typeof c&&"number"==typeof a.$ctrl.ngMin&&c<a.$ctrl.ngMin)},d.$validators.max=function(b,c){return"undefined"==typeof a.$ctrl.ngMax||!("number"==typeof c&&"number"==typeof a.$ctrl.ngMax&&c>a.$ctrl.ngMax)}}a.module("tw.form-components").directive("twDynamicFormControl",b),a.module("tw.form-components").controller("TwDynamicFormControlController",c),c.$inject=["$element","$scope"]}(window.angular),function(a){function b(){return{restrict:"E",template:"<div class='loader'> \t\t\t  <div class='loader-spinner'></div> \t\t\t  <div class='loader-flag'> \t\t\t    <svg xmlns='http://www.w3.org/2000/svg' width='52' height='52' viewBox='-2 -2 56 56'> \t\t\t      <polygon class='loader-flag-stroke'  stroke='#00B9FF' stroke-width='2' stroke-linejoin='miter' stroke-linecap='round' stroke-miterlimit='10' stroke-dasharray='300' stroke-dashoffset='300' fill='none' points='24.6,27.3 0,27.3 14.3,13.7 6.1,0 48.2,0 26.3,52 19.5,52 39.2,5.5 16.8,5.5 21.6,13.6 13.4,21.8 27,21.8' /> \t\t\t    </svg> \t\t\t    <svg class='loader-flag-fill' xmlns='http://www.w3.org/2000/svg' width='52' height='52' viewBox='0 2 52 48'> \t\t\t      <polygon fill='#00B9FF' points='6.1,0 14.3,13.7 0,27.3 24.6,27.3 27,21.8 13.4,21.8 21.6,13.6 16.8,5.5 39.2,5.5 19.5,52 26.3,52 48.2,0 '/> \t\t\t    </svg> \t\t\t  </div> \t\t\t</div>"}}a.module("tw.form-components").directive("twLoader",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",controllerAs:"$ctrl",bindToController:!0,scope:{state:"=",size:"@",onStop:"&",promise:"="},controller:["$scope","$interval","$timeout",c],template:"<span class='process' \t\t\t\tng-class='{ \t\t\t\t\t\"process-success\": $ctrl.processing === 1, \t\t\t\t\t\"process-danger\": $ctrl.processing === -1, \t\t\t\t\t\"process-stopped\": $ctrl.processing === 0, \t\t\t\t\t\"process-xs\": $ctrl.size === \"xs\", \t\t\t\t\t\"process-sm\": $ctrl.size === \"sm\", \t\t\t\t\t\"process-md\": $ctrl.size === \"md\", \t\t\t\t\t\"process-lg\": $ctrl.size === \"lg\", \t\t\t\t\t\"process-xl\": $ctrl.size === \"xl\" \t\t\t\t}'> \t\t\t\t<span class='process-icon-container'> \t\t\t\t\t<span class='process-icon-horizontal'></span> \t\t\t\t\t<span class='process-icon-vertical'></span> \t\t\t\t</span> \t\t\t\t<svg version='1.1' \t\t\t\t\txmlns='http://www.w3.org/2000/svg' \t\t\t\t\txml:space='preserve'> \t\t\t\t\t<circle class='process-circle' cx='50%' cy='50%' ng-attr-r='{{$ctrl.radius}}' \t\t\t\t\t\tfill-opacity='0.0' /> \t\t\t\t</svg> \t\t\t</span>"}}function c(a,b,c){function d(a){return a===-1||0===a||1===a}var e=this;e.processing=e.state;var f;a.$watch("$ctrl.state",function(a){d(e.processing)&&(e.processing=null,e.startProcess())}),a.$watch("$ctrl.size",function(a){
switch(b.cancel(f),e.startProcess(),e.size||(e.size="sm"),e.size){case"xs":e.radius="11";break;case"sm":e.radius="22";break;case"xl":e.radius="61";break;default:e.radius="46%"}}),e.startProcess=function(){f=b(function(){e.processing=e.state,d(e.state)&&e.stopProcess()},1500)},e.stopProcess=function(){b.cancel(f),e.onStop&&(0===e.state?e.onStop():c(e.onStop,1800))},e.startProcess()}a.module("tw.form-components").directive("twProcess",b)}(window.angular),function(a){function b(){function a(a,b){var c=this,d=b.controller("ngModel"),e=".radio",f="label";c.isChecked=function(){return c.ngValue&&c.ngModel===c.ngValue||c.value===c.ngModel},c.checked=c.isChecked(),c.buttonClick=function(a){c.ngDisabled||(c.checked=!0,d.$setViewValue(c.ngValue||c.value))},c.buttonFocus=function(){b.closest(f).addClass("focus"),b.triggerHandler("focus")},c.buttonBlur=function(){b.closest(f).removeClass("focus"),b.triggerHandler("blur")},c.hiddenInputChange=function(){c.ngChange&&c.ngChange()},b.on("blur",function(a){d.$setTouched()}),a.$watch("$ctrl.ngModel",function(a,b){a!==b&&d.$setDirty(),c.checked=c.isChecked()}),a.$watch("$ctrl.ngDisabled",function(a,c){a&&!c?b.closest(e).addClass("disabled"):!a&&c&&b.closest(e).removeClass("disabled")})}return{restrict:"E",require:"ngModel",controller:["$scope","$element",a],controllerAs:"$ctrl",bindToController:!0,scope:{name:"@",value:"@",ngModel:"=",ngValue:"=",ngRequired:"=",ngDisabled:"=",ngChange:"&"},template:" \t\t\t\t<input type='radio' class='sr-only' \t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\tng-value='$ctrl.ngValue || $ctrl.value' \t\t\t\t\tng-model='$ctrl.ngModel' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\tng-change='$ctrl.hiddenInputChange()' \t\t\t\t\ttabindex='-1' /> \t\t\t\t<button type='button' class='tw-radio-button' tw-focusable \t\t\t\t\tng-click='$ctrl.buttonClick($event)' \t\t\t\t\tng-focus='$ctrl.buttonFocus()' \t\t\t\t\tng-blur='$ctrl.buttonBlur()' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\tng-class='{checked: $ctrl.checked}' \t\t\t\t\taria-pressed='{{$ctrl.checked}}'> \t\t\t\t\t<span class='tw-radio-check'></span> \t\t\t\t</button>"}}a.module("tw.form-components").directive("twRadio",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",scope:{requirements:"=",model:"=",uploadOptions:"=",locale:"@",onRefreshRequirements:"&"},controller:["$scope","$http",c],controllerAs:"$ctrl",bindToController:!0,template:" \t\t\t<ul ng-if='$ctrl.requirements && $ctrl.requirements.length > 1' \t\t\t\tclass='nav nav-tabs m-b-3'> \t\t\t\t<li ng-repeat='requirementType in $ctrl.requirements' \t\t\t\t\tng-class='{\"active\": $ctrl.model.type === requirementType.type}'> \t\t\t\t\t<a href='' ng-click='$ctrl.switchTab(requirementType.type)'> \t\t\t\t\t\t{{$ctrl.getTabName(requirementType.type)}} \t\t\t\t\t</a> \t\t\t\t</li> \t\t\t</ul> \t\t\t<div class='tab-content'> \t\t\t\t<div ng-repeat='requirementType in $ctrl.requirements'\t\t\t\t\tng-if='$ctrl.model.type == requirementType.type' \t\t\t\t\tclass='tab-pane' \t\t\t\t\tid='{{requirementType.type}}' \t\t\t\t\tng-class='{\"active\": $ctrl.model.type == requirementType.type}'> \t\t\t\t\t<div class='row'> \t\t\t\t\t\t<div class='form-group' \t\t\t\t\t\t\tng-repeat='fieldGroup in requirementType.fields' \t\t\t\t\t\t\tng-class='{ \t\t\t\t\t\t\t\t\"col-sm-6\": fieldGroup.maxlength && fieldGroup.maxlength <= 10, \t\t\t\t\t\t\t\t\"col-sm-12\": !fieldGroup.maxlength || fieldGroup.maxlength > 10 \t\t\t\t\t\t\t}'> \t\t\t\t\t\t\t<label class='control-label'> \t\t\t\t\t\t\t\t{{fieldGroup.name}} \t\t\t\t\t\t\t</label> \t\t\t\t\t\t\t<div class='row'> \t\t\t\t\t\t\t\t<div class='col-xs-{{field.columns}}' \t\t\t\t\t\t\t\t\tng-repeat='field in fieldGroup.group'> \t\t\t\t\t\t\t\t\t<tw-dynamic-form-control \t\t\t\t\t\t\t\t\t\tname='{{field.key}}' \t\t\t\t\t\t\t\t\t\ttype='{{field.type | lowercase}}' \t\t\t\t\t\t\t\t\t\tplaceholder='{{field.placeholder}}' \t\t\t\t\t\t\t\t\t\thelp-text='{{field.helpText}}' \t\t\t\t\t\t\t\t\t\tlocale='{{$ctrl.locale}}' \t\t\t\t\t\t\t\t\t\tupload-accept='{{field.accept}}' \t\t\t\t\t\t\t\t\t\tupload-icon='{{field.icon}}' \t\t\t\t\t\t\t\t\t\tupload-too-large-message='{{field.tooLargeMessage}}' \t\t\t\t\t\t\t\t\t\toptions='field.valuesAllowed' \t\t\t\t\t\t\t\t\t\tupload-options='$ctrl.uploadOptions' \t\t\t\t\t\t\t\t\t\tng-model='$ctrl.model[field.key]' \t\t\t\t\t\t\t\t\t\tng-blur='$ctrl.onBlur(field)' \t\t\t\t\t\t\t\t\t\tng-required='field.required' \t\t\t\t\t\t\t\t\t\tng-disabled='field.disabled' \t\t\t\t\t\t\t\t\t\tng-minlength='field.minLength' \t\t\t\t\t\t\t\t\t\tng-maxlength='field.maxLength' \t\t\t\t\t\t\t\t\t\tng-min='field.min' \t\t\t\t\t\t\t\t\t\tng-max='field.max' \t\t\t\t\t\t\t\t\t\tng-pattern='field.validationRegexp' \t\t\t\t\t\t\t\t\t\tupload-options='field.uploadOptions' \t\t\t\t\t\t\t\t\t\ttw-validation > \t\t\t\t\t\t\t\t\t\t<!-- tw-dynamic-async-validator='field.validationAsync' --> \t\t\t\t\t\t\t\t\t</tw-dynamic-form-control> \t\t\t\t\t\t\t\t\t<div class='error-messages'> \t\t\t\t\t\t\t\t\t\t<div class='error-minlength'>Minimum {{field.minlength}} characters</div> \t\t\t\t\t\t\t\t\t\t<div class='error-maxlength'>Maximum {{field.maxlength}} characters</div> \t\t\t\t\t\t\t\t\t\t<div class='error-required'>{{fieldGroup.name}} is required</div> \t\t\t\t\t\t\t\t\t\t<div class='error-pattern'>Incorrect format</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t<div ng-if='field.tooltip' \t\t\t\t\t\t\t\t\t\tclass='help-block'> \t\t\t\t\t\t\t\t\t\t<a role='button' \t\t\t\t\t\t\t\t\t\t\ttabindex='0' \t\t\t\t\t\t\t\t\t\t\tdata-toggle='popover' \t\t\t\t\t\t\t\t\t\t\tdata-placement='top' \t\t\t\t\t\t\t\t\t\t\ttitle='{{field.tooltip}}'> \t\t\t\t\t\t\t\t\t\t\t<span class='glyphicon glyphicon-question-sign'></span> \t\t\t\t\t\t\t\t\t\t</a> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t</div> \t\t\t</div>"}}function c(b,c){function d(){o.model||(o.model={}),o.requirements&&e(o.requirements),b.$watch("$ctrl.requirements",function(b,c){a.equals(b,c)||(e(o.requirements),o.model.type=o.requirements.length?o.requirements[0].type:null)})}function e(a){a.forEach(function(a){a.fields.forEach(function(a){a.group.forEach(function(a){f(a),g(a),h(a)})})})}function f(a){if(a.validationRegexp)try{a.validationRegexp=new RegExp(ield.validationRegexp)}catch(b){console.log("API regexp is invalid"),a.validationRegexp=!1}else a.validationRegexp=!1}function g(a){if(a.valuesAsync){var b={};a.valuesAsync.params&&a.valuesAsync.params.length&&(b=n(o.model,a.valuesAsync.params)),c.post(a.valuesAsync.url,b).then(function(b){a.valuesAllowed=b.data,h(a)})["catch"](function(){})}}function h(b){a.isArray(b.valuesAllowed)&&b.valuesAllowed.forEach(function(a){a.value=a.key,a.label=a.name})}function i(a){var b=l(o.model.type),c=l(a);o.model.type=a,k(b,c)}function j(a){if(a&&a.length>0){var b=a.toLowerCase().split("_").join(" ");return b.charAt(0).toUpperCase()+b.slice(1)}return""}function k(a,b){var c=m(a),d=m(b),e=c.filter(function(a){return d.indexOf(a)<0});e.forEach(function(a){delete o.model[a]})}function l(a){for(var b=0;b<o.requirements.length;b++){var c=o.requirements[b];if(c.type===a)return c}}function m(a){var b=a.fields.map(function(a){return a.group.map(function(a){return a.key})});return Array.prototype.concat.apply([],b)}function n(a,b){var c={};return b.forEach(function(b){a[b.key]?c[b.parameterName]=a[b.key]:b.required}),c}var o=this;o.switchTab=i,o.getTabName=j,o.onBlur=function(a){!a.refreshRequirementsOnChange},d()}a.module("tw.form-components").directive("twRequirementsForm",b)}(window.angular),function(a){"use strict";function b(){return{require:"ngModel",bindToController:!0,controller:["$element","$scope","$transclude","$timeout",c],controllerAs:"$ctrl",replace:!1,transclude:!0,restrict:"EA",scope:{ngModel:"=",ngRequired:"=",ngDisabled:"=",options:"=",name:"@",placeholder:"@",filter:"@",size:"@",dropdownRight:"@",dropdownWidth:"@",inverse:"=",hideNote:"@",hideSecondary:"@",hideIcon:"@",hideCurrency:"@",hideCircle:"@"},template:" \t\t\t\t<div class='btn-group btn-block dropdown tw-select' aria-hidden='false'> \t\t\t\t\t<button type='button' class='btn btn-input dropdown-toggle' \t\t\t\t\t\tng-class='{ \t\t\t\t\t\t\t\"btn-input-inverse\": $ctrl.inverse, \t\t\t\t\t\t\t\"btn-addon\": $ctrl.inverse, \t\t\t\t\t\t\t\"btn-sm\": $ctrl.size === \"sm\", \t\t\t\t\t\t\t\"btn-lg\": $ctrl.size === \"lg\" \t\t\t\t\t\t}' \t\t\t\t\t\tdata-toggle='dropdown' aria-expanded='false' \t\t\t\t\t\tng-disabled='$ctrl.ngDisabled' \t\t\t\t\t\tng-focus='$ctrl.buttonFocus()' \t\t\t\t\t\ttw-focusable> \t\t\t\t\t\t<span class='tw-select-selected' ng-if='$ctrl.selected'> \t\t\t\t\t\t\t<span class='circle circle-inverse pull-xs-left circle-sm' \t\t\t\t\t\t\t\tng-if='$ctrl.selected && $ctrl.selected.icon && $ctrl.selected.secondary'>\t\t\t\t\t\t\t\t<i class='icon {{$ctrl.selected.icon}}'></i> \t\t\t\t\t\t\t</span> \t\t\t\t\t\t\t<span class='circle circle-inverse pull-xs-left'  \t\t\t\t\t\t\t\tng-class='$ctrl.circleClasses($ctrl.hideCircle)' \t\t\t\t\t\t\t\tng-if='($ctrl.selected.circleText || $ctrl.selected.circleImage || $ctrl.selected.circleIcon)'> \t\t\t\t\t\t\t\t<span ng-if='$ctrl.selected.circleText'>{{$ctrl.selected.circleText}}</span> \t\t\t\t\t\t\t\t<img ng-if='$ctrl.selected.circleImage' \t\t\t\t\t\t\t\t\tng-src='{{$ctrl.selected.circleImage}}' /> \t\t\t\t\t\t\t\t<i ng-if='$ctrl.selected.circleIcon' class='icon {{$ctrl.selected.circleIcon}}'></i> \t\t\t\t\t\t\t</span><span class='text-ellipsis'> \t\t\t\t\t\t\t\t<i class='currency-flag currency-flag-{{$ctrl.selected.currency | lowercase}}' \t\t\t\t\t\t\t\t\tng-if='$ctrl.selected && $ctrl.selected.currency' \t\t\t\t\t\t\t\t\tng-class='$ctrl.responsiveClasses($ctrl.hideCurrency)' \t\t\t\t\t\t\t\t\t></i><i class='icon {{$ctrl.selected.icon}}' \t\t\t\t\t\t\t\t\tng-if='$ctrl.selected && $ctrl.selected.icon && !$ctrl.selected.secondary' \t\t\t\t\t\t\t\t\tng-class='$ctrl.responsiveClasses($ctrl.hideIcon)' \t\t\t\t\t\t\t\t\t></i><span class='tw-select-label'>{{$ctrl.selected.label}}</span><span \t\t\t\t\t\t\t\t\tng-if='$ctrl.selected.note' \t\t\t\t\t\t\t\t\tng-class='$ctrl.responsiveClasses($ctrl.hideNote)' \t\t\t\t\t\t\t\t\tclass='tw-select-note small m-l-1'>{{$ctrl.selected.note}}</span><span \t\t\t\t\t\t\t\t\tng-if='$ctrl.selected.secondary' \t\t\t\t\t\t\t\t\tng-class='$ctrl.responsiveClasses($ctrl.hideSecondary)' \t\t\t\t\t\t\t\t\tclass='tw-select-secondary small secondary text-ellipsis'>{{$ctrl.selected.secondary}}</span> \t\t\t\t\t\t\t\t</span> \t\t\t\t\t\t\t</span> \t\t\t\t\t\t<span class='form-control-placeholder' ng-if='!$ctrl.selected'>{{$ctrl.placeholder}}</span> \t\t\t\t\t\t<span class='caret'></span> \t\t\t\t\t</button> \t\t\t\t\t<ul class='dropdown-menu' role='menu' ng-class='{ \t\t\t\t\t\t\t\"dropdown-menu-xs-right\": $ctrl.dropdownRight === \"xs\", \t\t\t\t\t\t\t\"dropdown-menu-sm-right\": $ctrl.dropdownRight === \"sm\", \t\t\t\t\t\t\t\"dropdown-menu-md-right\": $ctrl.dropdownRight === \"md\", \t\t\t\t\t\t\t\"dropdown-menu-lg-right\": $ctrl.dropdownRight === \"lg\", \t\t\t\t\t\t\t\"dropdown-menu-xl-right\": $ctrl.dropdownRight === \"xl\", \t\t\t\t\t\t\t\"dropdown-menu-sm\": $ctrl.dropdownWidth === \"sm\", \t\t\t\t\t\t\t\"dropdown-menu-md\": $ctrl.dropdownWidth === \"md\", \t\t\t\t\t\t\t\"dropdown-menu-lg\": $ctrl.dropdownWidth === \"lg\" \t\t\t\t\t\t}'> \t\t\t\t\t\t<li ng-if='$ctrl.filter'> \t\t\t\t\t\t\t<a href='' class='tw-select-filter-link p-a-0' tabindex='-1' \t\t\t\t\t\t\t\tng-focus='$ctrl.filterFocus()'> \t\t\t\t\t\t\t\t<div class='input-group'> \t\t\t\t\t\t\t\t\t<span class='input-group-addon'><i class='icon icon-search'></i></span> \t\t\t\t\t\t\t\t\t<input type='text' class='form-control tw-select-filter' placeholder='{{$ctrl.filter}}' \t\t\t\t\t\t\t\t\t\tng-model='$ctrl.filterString' \t\t\t\t\t\t\t\t\t\tng-change='$ctrl.filterChange()' \t\t\t\t\t\t\t\t\t\tng-keydown='$ctrl.filterKeydown($event)' /> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</li> \t\t\t\t\t\t<li ng-class='{active: !$ctrl.selected}' \t\t\t\t\t\t\tng-if='$ctrl.placeholder && !$ctrl.ngRequired && !$ctrl.filter'> \t\t\t\t\t\t\t<a href='' tabindex='-1' \t\t\t\t\t\t\t\tng-click='$ctrl.placeholderClick()' \t\t\t\t\t\t\t\tng-focus='$ctrl.placeholderFocus()' \t\t\t\t\t\t\t\tclass='tw-select-placeholder' tw-focusable> \t\t\t\t\t\t\t\t{{$ctrl.placeholder}} \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</li> \t\t\t\t\t\t<li ng-if='($ctrl.placeholder && !$ctrl.ngRequired) || $ctrl.filter' class='divider'></li> \t\t\t\t\t\t<li \t\t\t\t\t\t\tng-repeat='option in $ctrl.filteredOptions' \t\t\t\t\t\t\tng-class='{ \t\t\t\t\t\t\t\tactive: $ctrl.ngModel === option.value, \t\t\t\t\t\t\t\tdisabled: option.disabled, \t\t\t\t\t\t\t\t\"dropdown-header\": option.header, \t\t\t\t\t\t\t\t\"tw-select-option\": !option.header && !option.disabled \t\t\t\t\t\t\t}'> \t\t\t\t\t\t\t<span ng-if='option.header' class='text-ellipsis'>{{option.header}}</span> \t\t\t\t\t\t\t<a href='' \t\t\t\t\t\t\t\tng-if='!option.header' \t\t\t\t\t\t\t\tng-click='$ctrl.optionClick(option, $event)' \t\t\t\t\t\t\t\tng-focus='$ctrl.optionFocus(option)' \t\t\t\t\t\t\t\tng-class='{\"tw-select-option-link\": !option.disabled}' \t\t\t\t\t\t\t\tindex='{{$index}}' \t\t\t\t\t\t\t\ttabindex='-1' \t\t\t\t\t\t\t\ttw-focusable > \t\t\t\t\t\t\t\t<div class='circle circle-inverse pull-xs-left circle-sm' ng-if='option.icon && option.secondary'>\t\t\t\t\t\t\t\t\t<i class='icon {{option.icon}}'></i>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<i class='icon {{option.icon}} pull-xs-left' ng-if='option.icon && !option.secondary'></i> \t\t\t\t\t\t\t\t<i class='currency-flag currency-flag-{{option.currency | lowercase}} pull-xs-left' ng-if='option.currency'> \t\t\t\t\t\t\t\t</i><span class='circle circle-inverse pull-xs-left' ng-class='{\"circle-sm\": option.secondary, \"circle-xs\": !option.secondary}' \t\t\t\t\t\t\t\t\tng-if='option.circleText || option.circleImage || option.circleIcon'> \t\t\t\t\t\t\t\t\t<span class='tw-select-circle-text' ng-if='option.circleText'>{{option.circleText}}</span> \t\t\t\t\t\t\t\t\t<img ng-if='option.circleImage' ng-src='{{option.circleImage}}' /> \t\t\t\t\t\t\t\t\t<i ng-if='option.circleIcon' class='icon {{option.circleIcon}}'></i> \t\t\t\t\t\t\t\t</span>{{option.label}}<span \t\t\t\t\t\t\t\tng-if='option.note' class='tw-select-note small m-l-1'>{{option.note}}</span><span \t\t\t\t\t\t\t\tng-if='option.secondary' class='tw-select-secondary small text-ellipsis'>{{option.secondary}}</span> \t\t\t\t\t\t\t</a> \t\t\t\t\t\t</li> \t\t\t\t\t\t<li ng-if='$ctrl.hasTranscluded' class='divider'></li> \t\t\t\t\t\t<li ng-transclude ng-if='$ctrl.hasTranscluded' class='tw-select-transcluded'></li> \t\t\t\t\t</ul> \t\t\t\t</div> \t\t\t\t<input type='hidden' class='tw-select-hidden' \t\t\t\t\tname='{{$ctrl.name}}' \t\t\t\t\tvalue='{{$ctrl.ngModel}}' \t\t\t\t\tng-disabled='$ctrl.ngDisabled' />"}}function c(b,c,j,k){function p(a){var b="",c={xs:!0,sm:!0,md:!0,lg:!0,xl:!0},d=[];return"boolean"==typeof a&&a?"hidden":a&&a.toLowerCase&&"true"===a.toLowerCase()?"hidden":(a&&(d=a.split(",")),d.forEach(function(a){c[a]&&(b+="hidden-"+a+" ")}),b)}function q(a){var b=G.responsiveClasses(a),c=G.responsiveClasses(G.hideSecondary);return b+=G.selected.secondary&&0===c.length?" circle-sm":" circle-xs"}function r(){b.triggerHandler("focus")}function s(a,c){return a.disabled?void c.stopPropagation():(m(H,G,a),void b.find(".btn").focus())}function t(a){m(H,G,a)}function u(a){if(!$(a.target).hasClass("tw-select-filter")){var c=g(a);if(8===c)return a.preventDefault(),!1;var d=h(a);o(H,G,G.options,d),b.find(".active a").focus()}}function v(a){n(H,G),b.find(".btn").focus()}function w(){n(H,G)}function x(){if(!G.options||!G.options.filter)return[];var a=[];return G.options.filter(function(b){var c=G.filterString&&y(G.filterString.toLowerCase());if(!c)return!0;var d=!1;a.indexOf(b.label)>-1&&(d=!0);var e=(b.label&&b.label.toLowerCase().search(c)>=0||b.note&&b.note.toLowerCase().search(c)>=0||b.secondary&&b.secondary.toLowerCase().search(c)>=0||b.searchable&&b.searchable.toLowerCase().search(c)>=0)&&!d;return e&&a.push(b.label),e})}function y(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function z(){b.find(".tw-select-filter").focus()}function A(){G.filteredOptions=G.getFilteredOptions();var a=B(G.filteredOptions,G.selected);!a&&G.filteredOptions.length&&m(H,G,G.filteredOptions[0])}function B(b,c){var d;return b.forEach(function(b){c&&a.equals(c.value,b.value)&&(d=c)}),d}function C(a){var c=a.which||a.charCode||a.keyCode,d=b.find(".active"),e=d.find("a"),f=b.find(".tw-select-option-link");return 40===c?(F(d,e,f),a.preventDefault()):38===c?(E(d,e,f),a.preventDefault()):13===c&&(d.click(),b.find(".btn").focus(),a.preventDefault()),!0}function D(a){var b=G.filteredOptions[a.attr("index")];m(H,G,b)}function E(a,b,c){if(!a.length&&c.length)return void D($(c[c.length-1]));if(b[0]!==c[0]){var d=a.prevAll(".tw-select-option");return void D($(d[0]).find("a"))}}function F(a,b,c){if(!a.length&&c.length)return void D($(c[0]));if(b[0]!==c[c.length-1]){var d=a.nextAll(".tw-select-option");return void D($(d[0]).find("a"))}var e=$(".tw-select-transcluded");return e.length?void e.find("a").focus():void 0}var G=this,H=b.controller("ngModel");G.search="",i(H,G,G.options),l(H,G,b,G),d(G,c,H,b),e(G,b,H,G.options,k),f(j,G),G.buttonFocus=r,G.optionClick=s,G.optionFocus=t,G.optionKeypress=u,G.placeholderFocus=w,G.placeholderClick=v,G.filterFocus=z,G.filterChange=A,G.filterKeydown=C,G.responsiveClasses=p,G.circleClasses=q,G.getFilteredOptions=x,G.filterString="",G.filteredOptions=G.getFilteredOptions()}function d(a,b,c,d){b.$watch("$ctrl.ngModel",function(b,d){(b||d)&&b!==d&&c.$setDirty(),j(b,d,a)}),b.$watch("$ctrl.options",function(b,e){b!==e&&(i(c,a,a.options),l(c,a,d,a),a.filteredOptions=a.getFilteredOptions())})}function e(a,b,c,d,e){b.find(".btn, .dropdown-menu").on("focusout",function(){e(function(){0!==b.find(".btn:focus").length||b.find(".btn-group").hasClass("open")||b.trigger("blur")},150)}),b.on("blur",function(a){c.$setTouched()}),b.find(".btn").on("keypress",function(b){a.optionKeypress(b)}),b.find(".btn").on("click",function(){e(function(){b.attr("filter")?b.find(".tw-select-filter").focus():b.find(".active a").focus()})}),b.find("ul").on("keypress","a",function(b){a.optionKeypress(b)})}function f(a,b){a(function(a){(a.length>1||""!==a.text().trim())&&(b.hasTranscluded=!0)})}function g(a){return a.which||a.charCode||a.keyCode}function h(a){return String.fromCharCode(g(a))}function i(a,b,c){if(q(b.ngModel)){var d=k(b.options,b.ngModel);m(a,b,d)}}function j(a,b,c){if(a!==b){var d=k(c.options,a);d?c.selected=d:c.selected=null}}function k(b,c){var d=!1;return b.forEach(function(b){a.equals(b.value,c)&&(d=b)}),d}function l(a,b,c,d){if((b.ngRequired||d.required)&&!q(b.ngModel))for(var e=0;e<b.options.length;e++)if(q(b.options[e].value)){m(a,b,b.options[e]);break}}function m(a,b,c){c.disabled||(a.$setViewValue(c.value),a.$commitViewValue(),b.selected=c)}function n(a,b){a.$setViewValue(null),a.$commitViewValue(),b.selected=!1}function o(a,b,c,d){var e=p(a,b,c,b.search+d);return e?b.search+=d:(b.search=d,e=p(a,b,c,b.search)),e}function p(a,b,c,d){var e=!1,f=d.toLowerCase();return c.forEach(function(c){!e&&c.label&&(0===c.label.toLowerCase().indexOf(f)||c.note&&0===c.note.toLowerCase().indexOf(f)||c.secondary&&0===c.secondary.toLowerCase().indexOf(f)||c.searchable&&0===c.searchable.toLowerCase().indexOf(f))&&(m(a,b,c),e=!0)}),e}function q(a){return a||0===a||a===!1}a.module("tw.form-components").directive("twSelect",b)}(window.angular),function(a){"use strict";function b(){return{bindToController:!0,controller:[c],controllerAs:"$ctrl",replace:!1,transclude:!0,restrict:"E",scope:{title:"@",cta:"@",onUpload:"=",accept:"="},link:d,template:'<div class="text-center tw-upload-droppable-box" ng-class="{\'active\': $ctrl.isActive}"> \t\t\t\t<i class="icon icon-upload tw-upload-droppable-icon"></i>\t\t\t\t<h4 class="m-t-2" ng-if="$ctrl.title">{{$ctrl.title}}</h4>\t\t\t\t<div class="row">\t\t\t\t\t<div class="col-xs-12 col-sm-6 col-sm-offset-3 m-t-1">\t\t\t\t\t<ng-transclude></ng-transclude>\t\t\t\t\t<label class="link" for="file-upload">{{$ctrl.cta}}</label>\t\t\t\t\t<input tw-file-select id="file-upload" type="file" accept={{$ctrl.accept}} class="hidden" on-user-input="$ctrl.onManualUpload"/>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>'}}function c(){var b=this;b.dragCounter=0,b.isActive=!1,b.onManualUpload=function(c){b.onUpload&&"function"==typeof b.onUpload&&b.onUpload(a.element(document.querySelector("#file-upload"))[0].files[0],c)},b.onDrop=function(a,c){b.onUpload&&"function"==typeof b.onUpload&&b.onUpload(a,c),b.isActive=!1,b.dropCounter=0},b.onDragChange=function(a){a?(b.dragCounter++,1===b.dragCounter&&(b.isActive=!0)):(b.dragCounter--,0===b.dragCounter&&(b.isActive=!1))}}function d(a,b,c){b[0].addEventListener("dragenter",function(b){b.preventDefault(),a.$ctrl.onDragChange(!0),a.$apply()},!1),b[0].addEventListener("dragover",function(a){a.preventDefault()},!1),b[0].addEventListener("dragleave",function(b){b.preventDefault(),a.$ctrl.onDragChange(!1),a.$apply()},!1),b[0].addEventListener("drop",function(b){b.preventDefault(),a.$ctrl.onDrop(b.dataTransfer.files[0]),a.$apply()},!1)}function e(){return{bindToController:!0,controller:function(){},controllerAs:"$ctrl",replace:!1,restrict:"A",scope:{onUserInput:"="},link:f}}function f(a,b){b.on("change",function(b){a.$ctrl.onUserInput&&"function"==typeof a.$ctrl.onUserInput&&a.$ctrl.onUserInput(b)})}a.module("tw.form-components").directive("twFileSelect",e).controller("TwUploadDroppableController",c).directive("twUploadDroppable",b)}(window.angular),function(a){"use strict";function b(){return{bindToController:!0,controller:["$timeout","$element","$http","$scope","$transclude","$q","$attrs",c],controllerAs:"$ctrl",replace:!1,transclude:!0,restrict:"E",scope:{ngModel:"=",name:"@",icon:"@",description:"@",instructions:"@",buttonText:"@",cancelText:"@",processingText:"@",completeText:"@",errorMessage:"@",tooLargeMessage:"@",size:"@",accept:"@",httpOptions:"=",onStart:"=",onSuccess:"=",onFailure:"=",onCancel:"=",maxSize:"="},link:d,template:'<div class="droppable" ng-class="{ \t\t\t\t\t\'droppable-sm\': $ctrl.size === \'sm\', \t\t\t\t\t\'droppable-md\': $ctrl.size === \'md\' || !$ctrl.size, \t\t\t\t\t\'droppable-lg\': $ctrl.size === \'lg\', \t\t\t\t\t\'droppable-dropping\': $ctrl.isDroppable, \t\t\t\t\t\'droppable-processing\': !$ctrl.isDone && ($ctrl.isProcessing || $ctrl.isSuccess || $ctrl.isError), \t\t\t\t\t\'droppable-complete\': $ctrl.isDone \t\t\t\t}"> \t\t\t\t<div class="droppable-default-card" aria-hidden="{{$ctrl.isDone}}"> \t\t\t\t\t<div class="droppable-card-content"> \t\t\t\t\t\t<div class="m-b-2"> \t\t\t\t\t\t\t<i class="icon icon-{{$ctrl.viewIcon}} icon-xxl"></i> \t\t\t\t\t\t</div> \t\t\t\t\t\t<h4 class="m-b-1" ng-if="$ctrl.description">{{$ctrl.description}}</h4> \t\t\t\t\t\t<p class="m-b-2">{{$ctrl.instructions}}</p> \t\t\t\t\t\t<label class="btn btn-primary">{{$ctrl.buttonText}} \t\t\t\t\t\t\t<input tw-file-select type="file" \t\t\t\t\t\t\t\taccept="{{$ctrl.accept}}"" class="tw-droppable-input hidden" name="file-upload" \t\t\t\t\t\t\t\ton-user-input="$ctrl.onManualUpload" ng-model="$ctrl.inputFile"/> \t\t\t\t\t\t</label> \t\t\t\t\t</div> \t\t\t\t</div> \t\t\t\t<div class="droppable-processing-card droppable-card" \t\t\t\t\taria-hidden="{{$ctrl.isDone}}"> \t\t\t\t\t<div class="droppable-card-content"> \t\t\t\t\t\t<h4 class="m-b-2"> \t\t\t\t\t\t\t<span ng-if="$ctrl.isProcessing && $ctrl.processingText">{{$ctrl.processingText}}</span> \t\t\t\t\t\t\t<span ng-if="$ctrl.isSuccess && $ctrl.successText">{{$ctrl.successText}}</span> \t\t\t\t\t\t\t<span ng-if="$ctrl.isError && $ctrl.failureText">{{$ctrl.failureText}}</span> \t\t\t\t\t\t</h4> \t\t\t\t\t\t<tw-process size="sm" state="$ctrl.processingState" \t\t\t\t\t\t\tng-if="!$ctrl.isDone && ($ctrl.isProcessing || $ctrl.isSuccess || $ctrl.isError)"></tw-process> \t\t\t\t\t</div> \t\t\t\t</div> \t\t\t\t<div class="droppable-complete-card droppable-card" \t\t\t\t\taria-hidden="{{!$ctrl.isDone}}"> \t\t\t\t\t<div class="droppable-card-content">\t\t\t\t\t\t\t<div ng-if="!$ctrl.hasTranscluded && !$ctrl.isError"> \t\t\t\t\t\t\t<h4 class="m-b-2" ng-if="$ctrl.completeText">{{$ctrl.completeText}}</h4> \t\t\t\t\t\t\t<img ng-src="{{$ctrl.image}}" ng-if="$ctrl.isImage" class="thumbnail m-b-3" /> \t\t\t\t\t\t\t<i class="icon icon-pdf icon-xxl" ng-if="!$ctrl.isImage"></i> \t\t\t\t\t\t\t<p class="text-ellipsis m-b-2">{{$ctrl.fileName}}</p> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div ng-if="!$ctrl.hasTranscluded && $ctrl.isError"> \t\t\t\t\t\t\t<h4 class="m-b-2" ng-if="$ctrl.isTooLarge">{{$ctrl.tooLargeMessage}}</h4> \t\t\t\t\t\t\t<h4 class="m-b-2" ng-if="$ctrl.isWrongType">{{$ctrl.wrongTypeText}}</h4> \t\t\t\t\t\t\t<h4 class="m-b-2" ng-if="!$ctrl.isTooLarge && $ctrl.errorMessage">{{$ctrl.errorMessage}}</h4> \t\t\t\t\t\t\t<i class="icon icon-alert icon-xxl text-danger m-b-1"></i> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div ng-if="$ctrl.hasTranscluded" ng-transclude></div> \t\t\t\t\t\t<p ng-if="$ctrl.cancelText" class="m-t-2 m-b-0"> \t\t\t\t\t\t\t<a href="" ng-click="$ctrl.clear()">{{$ctrl.cancelText}}</a> \t\t\t\t\t\t</p> \t\t\t\t\t</div> \t\t\t\t</div> \t\t\t\t<div class="droppable-dropping-card droppable-card"> \t\t\t\t\t<div class="droppable-card-content"> \t\t\t\t\t\t<h4 class="m-b-2">Drop file to start upload</h4> \t\t\t\t\t\t<div class="circle circle-sm"> \t\t\t\t\t\t\t<i class="icon icon-add"></i> \t\t\t\t\t\t</div> \t\t\t\t\t\t<p class="m-t-2 m-b-0"></p> \t\t\t\t\t</div> \t\t\t\t</div> \t\t\t</div>'}}function c(b,c,d,g,h,i,j){function k(){u.isDroppable=!1,u.isProcessing=!1,u.isSuccess=!1,u.isError=!1,u.dragCounter=0,u.isDone=!1,u.isTooLarge=!1,u.isWrongType=!1,c[0].querySelector("input").value=null,l(null)}function l(a){if("undefined"!=typeof j.ngModel){var b=c.controller("ngModel");if(!b.$setViewValue)return;b.$setViewValue(a)}}function m(b){var c=new FormData;c.append(u.name,b);var e=n(a.copy(u.httpOptions));return d.post(e.url,c,e)}function n(b){if(!b.url)throw new Error("You must supply a URL to post image data asynchronously");return b.headers||(b.headers={}),b.method&&delete b.method,b.headers["Content-Type"]=void 0,b.transformRequest=a.identity,b}function o(a){var b=new FileReader,c=i.defer();return b.onload=function(a){c.resolve(a.target.result)},b.onerror=function(a){c.reject(a)},b.readAsDataURL(a),c.promise}function p(a){l(a),u.isImage=v,v&&(u.image=a)}function q(a){return u.processingState=1,b(function(){u.isProcessing=!1,u.isSuccess=!0},3e3),b(function(){e(u.onSuccess,a),u.isDone=!0},3800),a}function r(a){return u.processingState=-1,b(function(){u.isProcessing=!1,u.isError=!0},3e3),b(function(){e(u.onFailure,a),u.isDone=!0},4100),a}function s(b,c){return!(a.isNumber(c)&&b.size>c)}function t(a,b){return!0}var u=this,v=!1;if(u.dragCounter=0,u.isProcessing=!1,u.processingState=null,f(h,u),g.$watch("$ctrl.icon",function(){u.viewIcon=u.icon?u.icon:"upload"}),(u.processingText||u.successText||u.failureText)&&(!u.processingText||!u.successText||!u.failureText))throw new Error("Supply all of processing, success, and failure text, or supply none.");u.onManualUpload=function(b){var d=a.element(c[0].querySelector(".tw-droppable-input"))[0].files[0];u.fileDropped(d,b)},u.fileDropped=function(a,b){return k(),v=a.type&&a.type.indexOf("image")>-1,u.fileName=a.name,u.isProcessing=!0,u.processingState=null,e(u.onStart,a),s(a,u.maxSize)?t(a,u.accept)?void(u.httpOptions?i.all([m(a),o(a)]).then(function(a){return p(a[1]),a[0]}).then(q)["catch"](r):o(a).then(p).then(q)["catch"](r)):(u.isWrongType=!0,void r({status:415,statusText:"Unsupported Media Type"})):(u.isTooLarge=!0,void r({status:413,statusText:"Request Entity Too Large"}))},u.onDragChange=function(a){a?(u.dragCounter++,u.dragCounter>=1&&(u.isDroppable=!0)):(u.dragCounter--,u.dragCounter<=0&&(u.isDroppable=!1))},u.clear=function(){k(),e(u.onCancel)}}function d(a,b,c){b[0].addEventListener("dragenter",function(b){b.preventDefault(),a.$ctrl.onDragChange(!0),a.$apply()},!1),b[0].addEventListener("dragover",function(a){a.preventDefault()},!1),b[0].addEventListener("dragleave",function(b){b.preventDefault(),a.$ctrl.onDragChange(!1),a.$apply()},!1),b[0].addEventListener("drop",function(b){b.preventDefault(),a.$ctrl.fileDropped(b.dataTransfer.files[0],b),a.$apply()},!1)}function e(a,b){a&&"function"==typeof a&&a(b)}function f(a,b){a(function(a){(a.length>1||""!==a.text().trim())&&(b.hasTranscluded=!0)})}function g(){return{bindToController:!0,controller:function(){},controllerAs:"$ctrl",replace:!1,restrict:"A",scope:{onUserInput:"="},link:h}}function h(a,b){b.on("change",function(b){a.$ctrl.onUserInput&&"function"==typeof a.$ctrl.onUserInput&&a.$ctrl.onUserInput(b)})}a.module("tw.form-components").directive("twFileInput",g).controller("twUploadController",c).directive("twUpload",b)}(window.angular),function(a){"use strict";function b(){var a={BIF:0,BYR:0,CLP:0,DJF:0,GNF:0,JPY:0,KMF:0,KRW:0,MGA:0,PYG:0,RWF:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,BHD:3,JOD:3,KWD:3,OMR:3,TND:3};this.getDecimals=function(b){return b.toUpperCase&&"undefined"!=typeof a[b.toUpperCase()]?a[b.toUpperCase()]:2}}a.module("tw.form-components").service("TwCurrencyData",b)}(window.angular),function(a){"use strict";function b(){function a(a){return window.Intl&&"object"==typeof window.Intl&&window.Intl.DateTimeFormat.supportedLocalesOf([a]).length>0}var b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];this.getLastDayOfMonth=function(a,b){var c=this.getUTCDate(a,b+1,0);return c.getUTCDate()},this.getUTCDate=function(a,b,c){var d=new Date;return d.setUTCFullYear(a,b,c),d.setUTCHours(0),d.setUTCMinutes(0),d.setUTCSeconds(0),d.setUTCMilliseconds(0),d},this.getDayNamesForLocale=function(b,d){if(d||(d="long"),!a(b))return c;for(var e,f=[],g=1;g<=7;g++){e=this.getUTCDate(2001,0,g);var h=e.toLocaleDateString(b,{weekday:d});h=h[0].toUpperCase()+h.substring(1),f.push(h)}return f},this.getMonthNamesForLocale=function(c,d){if(d||(d="long"),!a(c))return b;for(var e,f=[],g=0;g<12;g++){e=new Date(Date.UTC(2e3,g,15));var h=e.toLocaleDateString(c,{month:d});h=h[0].toUpperCase()+h.substring(1),f.push(h)}return f},this.getWeekday=function(a,b,c){var d=this.getUTCDate(a,b,c);return d.getUTCDay()},this.isMonthBeforeDay=function(a){return a.indexOf("US",a.length-2)!==-1},this.addYears=function(a,b){return this.addToDate(a,b,0,0)},this.addMonths=function(a,b){return this.addToDate(a,0,b,0)},this.addDays=function(a,b){return this.addToDate(a,0,0,b)},this.addToDate=function(a,b,c,d){return this.getUTCDate(a.getUTCFullYear()+b,a.getUTCMonth()+c,a.getUTCDate()+d)}}a.module("tw.form-components").service("TwDateService",b)}(window.angular);