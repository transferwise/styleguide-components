!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=6)}([function(a,b,c){"use strict";function d(){function a(a,b){return a[b]&&"*"!==a[b]}this.formatUsingPattern=function(b,c){if(b||(b=""),"string"!=typeof c)return b;for(var d="",e=0,f=b.length,g=0;f;)a(c,g)?(d+=c[g],e++):(d+=b[g-e],f--),g++;var h=this.countSeparatorsAfterCursor(c,g);return h&&(d+=c.substr(g,h)),d},this.unformatUsingPattern=function(b,c){if(!b)return"";if("string"!=typeof c)return b;for(var d=0;d<c.length;d++)if(a(c,d))for(;b.indexOf(c[d])>=0;)b=b.replace(c[d],"");return b},this.reformatUsingPattern=function(a,b,c){return"undefined"==typeof c&&(c=b),this.formatUsingPattern(this.unformatUsingPattern(a,c),b)},this.countSeparatorsBeforeCursor=function(b,c){for(var d=0;a(b,c-d-1);)d++;return d},this.countSeparatorsAfterCursor=function(b,c){for(var d=0;a(b,c+d);)d++;return d},this.countSeparatorsInAppendedValue=function(b,c,d){for(var e=0,f=0,g=d.length;g;)a(b,c+f)?e++:g--,f++;return e},this.countSeparatorsInPattern=function(b){for(var c=0,d=0;d<b.length;d++)a(b,d)&&c++;return c}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return{restrict:"A",require:"ngModel",bindToController:!0,controllerAs:"$ctrl",scope:{ngModel:"<",twTextFormat:"@"},controller:g["default"]}}Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=d(f),h=c(8),i=d(h),j=c(0),k=d(j);b["default"]=angular.module("tw.styleguide.formatting.text-format",[]).service("TwUndoStackFactory",i["default"]).service("TwTextFormatService",k["default"]).directive("twTextFormat",e).name},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return function(b,c){return b=b||"",c?a.formatUsingPattern(b,c):b}}Object.defineProperty(b,"__esModule",{value:!0});var f=c(0);d(f);e.$inject=["TwTextFormatService"],b["default"]=angular.module("tw.styleguide.formatting.text-format").filter("twTextFormat",e).name},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(9),f=d(e);b["default"]=angular.module("tw.styleguide.help.popover",[]).directive("twPopOver",f["default"]).name},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(10),f=d(e);b["default"]=angular.module("tw.styleguide.help.tooltip",[]).directive("twToolTip",f["default"]).name},function(a,b){a.exports=angular},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(5),f=d(e),g=c(3),h=d(g),i=c(4),j=d(i),k=c(1),l=d(k),m=c(2),n=d(m);b["default"]=f["default"].module("tw.form-styling",[h["default"],j["default"],l["default"],n["default"]]).name},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e,f,g){var h=this;d(this,a),this.keydownCount=0,this.pattern="",this.undoStack=g["new"](),this.$ngModel=b.controller("ngModel"),this.$timeout=c,this.TextFormatService=f,this.element=b[0],this.$ngModel.$formatters.push(function(a){return h.TextFormatService.formatUsingPattern(a,h.pattern)}),this.$ngModel.$parsers.push(function(a){return h.TextFormatService.unformatUsingPattern(a,h.pattern)}),this.element.addEventListener("change",function(a){h.onChange(a)}),this.element.addEventListener("keydown",function(a){h.onKeydown(a)}),this.element.addEventListener("paste",function(a){h.onPaste(a)}),this.element.addEventListener("cut",function(a){h.onCut(a)}),this.element.addEventListener("copy",function(a){h.onCopy(a)}),this.replaceLengthValidators(this.$ngModel,this.TextFormatService,this.$timeout),e.$watch("$ctrl.twTextFormat",function(a,b){h.onPatternChange(a)}),e.$watch("$ctrl.ngModel",function(a,b){h.onModelChange(a,b)}),this.undoStack.reset(this.element.value)}return e(a,[{key:"onModelChange",value:function(a,b){if(a!==b){var c=this.element.selectionStart,d=this.element.selectionEnd;this.reformatControl(this.element,a),this.setSelection(c,d)}}},{key:"onPatternChange",value:function(a,b){if(a===b)return void(this.pattern=a);a&&a.indexOf("||")>0?this.pattern=a.substring(0,a.indexOf("||")):this.pattern=a;var c=this.element.value;b&&(c=this.TextFormatService.unformatUsingPattern(c,b)),a&&(c=this.TextFormatService.formatUsingPattern(c,this.pattern)),this.undoStack.reset(c),this.element.value=c}},{key:"reformatControl",value:function(a,b){b||(b=a.value);var c=this.TextFormatService.reformatUsingPattern(b,this.pattern);c!==b&&(a.value=c)}},{key:"onChange",value:function(){this.reformatControl(this.element),this.undoStack.add(this.element.value)}},{key:"onPaste",value:function(a){var b=this,c=this.element.selectionStart,d=(this.element.value.length,a.clipboardData||window.clipboardData),e=d.getData("Text"),f=this.TextFormatService.countSeparatorsInAppendedValue(this.pattern,c,e);this.$timeout(function(){var a=c+e.length+f;b.reformatControl(b.element),b.undoStack.add(b.element.value),b.setSelection(a,a)})}},{key:"onKeydown",value:function(a){var b=this;this.keydownCount++;var c=this.keydownCount,d=a.keyCode||a.which,e=a.target.selectionStart,f=a.target.selectionEnd;return h.indexOf(d)>=0||a.metaKey||a.ctrlKey?(d===g.z&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),a.stopPropagation(),this.element.value=this.undoStack.undo()),void(d===g.y&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),a.stopPropagation(),this.element.value=this.undoStack.redo()))):void this.$timeout(function(){b.afterKeydown(d,c,b.element,b.pattern,e,f)})}},{key:"afterKeydown",value:function(a,b,c,d,e,f){var h;a===g.backspace?(h=this.doBackspace(c,d,e,f),this.$ngModel.$setViewValue(h)):a===g["delete"]?(h=this.doDelete(c,d,e,f),this.$ngModel.$setViewValue(h)):this.keydownCount===b&&this.doKeypress(c,d,e,f)}},{key:"doBackspace",value:function(a,b,c,d){a.value=this.getFormattedValueAfterBackspace(a,b,c,d),this.undoStack.add(a.value);var e=this.getPositionAfterBackspace(b,a,c,d);return this.setSelection(e,e),a.value}},{key:"getFormattedValueAfterBackspace",value:function(a,b,c,d){var e,f,g=a.value,h=this.TextFormatService.countSeparatorsBeforeCursor(b,c);if(h){var i=h>1?1:0;c!==d?(e=c-h+1,f=c-i):(e=c-h,f=c-i),g=this.removeCharacters(a.value,e,f)}return this.TextFormatService.reformatUsingPattern(g,b)}},{key:"doDelete",value:function(a,b,c,d){return a.value=this.getFormattedValueAfterDelete(a,b,c,d),this.undoStack.add(a.value),this.setSelection(c,c),a.value}},{key:"setSelection",value:function(a,b){this.element.setSelectionRange(a,b)}},{key:"getFormattedValueAfterDelete",value:function(a,b,c,d){var e,f,g=a.value,h=this.TextFormatService.countSeparatorsAfterCursor(b,c);if(h){var i=h>1?0:1;c!==d?(e=c+i,f=c+h+i):(e=c+h,f=c+h+1),g=this.removeCharacters(a.value,e,f)}return this.TextFormatService.reformatUsingPattern(g,b)}},{key:"doKeypress",value:function(a,b,c,d){this.reformatControl(a),this.undoStack.add(a.value);var e=this.getPositionAfterKeypress(b,a,c,d);this.setSelection(e,e)}},{key:"getPositionAfterBackspace",value:function(a,b,c,d){var e=this.TextFormatService.countSeparatorsBeforeCursor(a,c),f=c!==d,g=c-e-(f?0:1);return g+this.TextFormatService.countSeparatorsAfterCursor(a,g)}},{key:"getPositionAfterKeypress",value:function(a,b,c,d){var e;return c!==d?e=this.TextFormatService.countSeparatorsAfterCursor(a,c):(e=this.TextFormatService.countSeparatorsAfterCursor(a,c),0===e&&(e=this.TextFormatService.countSeparatorsAfterCursor(a,c+1))),c+1+e}},{key:"removeCharacters",value:function(a,b,c){return a.substring(0,b-1)+a.substring(c-1,a.length)}},{key:"onCut",value:function(a){var b=this,c=this.element.selectionStart;this.$timeout(function(){b.reformatControl(b.element),b.undoStack.add(b.element.value);var a=c+b.TextFormatService.countSeparatorsAfterCursor(b.pattern,c);b.setSelection(a,a)})}},{key:"onCopy",value:function(a){var b=this,c=this.element.selectionStart,d=this.element.selectionEnd;this.$timeout(function(){b.setSelection(c,d)})}},{key:"replaceLengthValidators",value:function(a,b,c){var d=this;c(function(){var c=a.$validators.minlength,e=a.$validators.maxlength;c&&(a.$validators.minlength=function(a,e){return c(a,b.unformatUsingPattern(e,d.pattern))}),e&&(a.$validators.maxlength=function(a,c){return e(a,b.unformatUsingPattern(c,d.pattern))})})}}]),a}(),g={cmd:224,cmdLeft:91,cmdRight:93,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,end:35,home:36,left:37,up:38,right:39,down:40,"delete":46,y:89,z:90},h=[g.cmd,g.cmdLeft,g.cmdRight,g.enter,g.shift,g.ctrl,g.alt,g.left,g.up,g.right,g.down];f.$inject=["$element","$timeout","$scope","TwTextFormatService","TwUndoStackFactory"],b["default"]=f},function(a,b,c){"use strict";function d(){this["new"]=function(){return new e}}function e(){var a=0,b=[];this.reset=function(c){b=[c],a=0},this.add=function(c){b.length-1>a&&(b=b.slice(0,a+1)),b[a]!==c&&(b.push(c),a++)},this.undo=function(){return a>=0&&"undefined"!=typeof b[a-1]&&a--,b[a]},this.redo=function(){return a<b.length&&"undefined"!=typeof b[a+1]&&a++,b[a]}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";function d(){return{restrict:"A",link:function(a,b){if(!b.popover)return void console.log("twPopOver requires tooltip from bootstrap.js");var c={},d=b[0];d.getAttribute("data-trigger")?"hover"===d.getAttribute("data-trigger")&&(c.trigger="hover focus"):c.trigger="focus",d.getAttribute("data-placement")||(c.placement="top"),d.getAttribute("data-content-html")&&(c.html=!0),b.popover(c),d.setAttribute("tabindex","0"),d.setAttribute("role","button"),d.setAttribute("data-toggle","popover")}}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";function d(){return{restrict:"A",link:function(a,b){if(!b.tooltip)return void console.log("twToolTip requires bootstrap.js");var c=b[0],d={};c.getAttribute("data-placement")||(d.placement="top"),b.tooltip(d),c.setAttribute("tabindex","0"),c.setAttribute("data-toggle","tooltip")}}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}]);