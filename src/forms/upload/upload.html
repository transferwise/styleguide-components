<div class="droppable"
  tw-drag-enter="$ctrl.onDragEnter()"
  tw-drag-leave="$ctrl.onDragLeave()"
  tw-drop="$ctrl.onDrop(files)"
  ng-class="{
    'droppable-sm': $ctrl.size ==='sm',
    'droppable-md': $ctrl.size ==='md' || !$ctrl.size,
    'droppable-lg': $ctrl.size ==='lg',
    'droppable-dropping': $ctrl.isDroppable && !$ctrl.ngDisabled,
    'droppable-processing': !$ctrl.isDone && ($ctrl.isProcessing || $ctrl.isSuccess),
    'droppable-complete': $ctrl.isDone
  }">

  <div class="droppable-default-card"
    aria-hidden="{{$ctrl.isDone || $ctrl.isProcessing}}">
    <tw-upload-capture
      label="$ctrl.label"
      icon="$ctrl.icon"
      accept="$ctrl.accept"
      input-file="$ctrl.inputFile"
      help-image="$ctrl.helpImage"
      button-text="$ctrl.buttonText"
      ng-disabled="$ctrl.ngDisabled"
      placeholder="$ctrl.placeholder || $ctrl.description"
      is-live-camera-upload="$ctrl.isLiveCameraUpload"
      camera-overlay="$ctrl.cameraOverlay"
      camera-direction="$ctrl.cameraDirection"
      on-file-capture="$ctrl.onFileCapture(file)"
    ></tw-upload-capture>
  </div>

  <div class="droppable-processing-card droppable-card droppable-card--wider"
    aria-hidden="{{!$ctrl.isProcessing}}">
    <tw-upload-processing
      name="$ctrl.name"
      file="$ctrl.file"
      on-start="$ctrl.onProcessStart(file)"
      on-success="$ctrl.onProcessSuccess(file, dataUrl, id, response)"
      on-failure="$ctrl.onProcessFailure(error)"

      max-size="$ctrl.maxSize"
      accept="$ctrl.accept"
      http-options="$ctrl.httpOptions"

      processing-message="$ctrl.processingText"
      success-message="$ctrl.successText"
      error-message="$ctrl.failureText"

      validation-messages="$ctrl.validationMessages"

      too-large-message="$ctrl.tooLargeMessage"

      cancel-text="$ctrl.cancelText"
      on-cancel="$ctrl.reset()"
    ></tw-upload-processing>
  </div>

  <div class="droppable-complete-card droppable-card"
    aria-hidden="{{!$ctrl.isDone}}">
    <tw-upload-success
      label="$ctrl.label"
      is-image="$ctrl.isImage"
      file="$ctrl.file"
      data="$ctrl.dataUrl"

      success-message="$ctrl.successText"
      cancel-text="$ctrl.cancelText"
      on-cancel="$ctrl.reset()"
    ></tw-upload-success>
  </div>

  <div class="droppable-dropping-card droppable-card">
    <tw-upload-dropping
      dropping-text="$ctrl.droppingText"
    ></tw-upload-dropping>
  </div>
</div>
